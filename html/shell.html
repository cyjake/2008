<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type"
          content="text/html; charset=utf-8" />
    <meta name="generator" content="muse.el" />
    <link rel="shortcut icon" href="../images/favicon.ico" />
    <link rel="stylesheet" type="text/css" media="screen" href="../css/wiki.css" />
    <title>Shell Cammands & Script Programming - dotnil.org</title>
  </head>
  <body>
    <ul class="nav">
	<li><a href="./">Home</a></li>
	<li><a href="./movie.html">Little IMDb</a></li>
	<li><a href="./debian.html">Debian</a></li>
	<li><a href="./fiction.html">Reading</a></li>
	<li><a href="./about.html">About</a></li>
    </ul> <!-- navigator -->
    <div id="greet">
      <span class="email">leto@freecity.cn</span>
      <h1>Shell Cammands & Script Programming</h1>
      <h2>Jake's Free House For Fun.</h2>
    </div> <!-- greet -->
    <div id="wiki">
      <div id="cont">
      <!--contents goes here--><div class="toc"><h2>Table of Contents</h2>
<dl>
<dt><a href="#sec1">Commands Notes</a></dt>
<dd>
<dl>
<dt><a href="#sec2">!Special Shell Commands</a></dt>
<dt><a href="#sec3">Collected from the Internet</a></dt>
<dd>
<dl>
<dt><a href="#sec4">使用命令 Top 10</a></dt>
<dt><a href="#sec5">都有谁在线上？</a></dt>
<dt><a href="#sec6">Tar</a></dt>
</dl>
</dd>
</dl>
</dd>
<dt><a href="#sec7">Besides sh &amp; bash</a></dt>
<dd>
<dl>
<dt><a href="#sec8">Zsh</a></dt>
<dd>
<dl>
<dt><a href="#sec9">Coloring zsh</a></dt>
</dl>
</dd>
</dl>
</dd>
</dl>
</div>

      <!-- Page published by Emacs Muse begins here -->

<h2><a name="sec1" id="sec1"></a>
Commands Notes</h2>

<h3><a name="sec2" id="sec2"></a>
!Special Shell Commands</h3>

<pre class="example">
&amp; ; | * ? ' &quot; ` [ ] ( ) $ &lt; &gt; { } ^ # / \ % ! ~  +
</pre>


<h3><a name="sec3" id="sec3"></a>
Collected from the Internet</h3>

<h4><a name="sec4" id="sec4"></a>
使用命令 Top 10</h4>

<pre class="example">
# history | awk '{CMD[$2]++; count++; } \
    END { for (a in CMD)print CMD[a] &quot; &quot; CMD[a]/count*100 &quot;% &quot; a;}' \
    | grep -v &quot;./&quot; | column -c3 -s &quot; &quot; -t | sort -nr | nl | head -n10
</pre>

<p>另外一个版本</p>

<pre class="example">
# history|awk '{print $2}'|awk 'BEGIN {FS=&quot;|&quot;} {print $1}'|sort -r |uniq -c |sort -rn
</pre>


<h4><a name="sec5" id="sec5"></a>
都有谁在线上？</h4>

<pre class="example">
jake@debian:~$ w
 20:33:02 up 10:27,  2 users,  load average: 0.06, 0.34, 0.57
USER     TTY      FROM              LOGIN@   IDLE   JCPU   PCPU WHAT
jake     tty7     :0               10:06    1.00s  1:33   1.01s /usr/bin/gnome-
jake     pts/0    :0.0             10:07   34:45m  0.93s  0.93s bash
jake@debian:~$ who am i
jake@debian:~$ who
jake     tty7         2007-11-07 10:06 (:0)
jake     pts/0        2007-11-07 10:07 (:0.0)
jake@debian:~$ finger
Login     Name         Tty      Idle  Login Time   Office     Office Phone
jake      Jake Chen    tty7           Nov  7 10:06 (:0)
jake      Jake Chen    pts/0      34  Nov  7 10:07 (:0.0)
</pre>


<h4><a name="sec6" id="sec6"></a>
Tar</h4>

<pre class="example">
tar -xvvf foo.tar
    extract foo.tar

tar -xvvzf foo.tar.gz
    extract gzipped foo.tar.gz

tar -xvvjf foo.tar.bz2
    extract bizipped foo.tar.bz2

tar -cvvf foo.tar foo/
    tar contents of folder foo in foo.tar

</pre>




<h2><a name="sec7" id="sec7"></a>
Besides sh &amp; bash</h2>

<h3><a name="sec8" id="sec8"></a>
Zsh</h3>

<h4><a name="sec9" id="sec9"></a>
Coloring zsh</h4>

<blockquote>
<p class="quoted">
<a href="http://books.slashdot.org/article.pl?sid=08/08/13/137246&amp;from=rss">http://books.slashdot.org/article.pl?sid=08/08/13/137246&amp;from=rss</a></p>
<p class="quoted">Coloring the prompt? That was the &quot;gee whiz!&quot; moment that made me switch permanently. From my .zshrc:</p>

<pre class="example">
# Import color definitions
autoload colors zsh/terminfo
colors</p>
<p class="quoted"># Define common and useful things to put in a prompt
typeset -A prc
prc[abbrevpath]='%{${fg[red]}%}%B%45&lt;...&lt;%~%&lt;&lt;%b%{${fg[default]}%}'
prc[newline]=$'\n'
prc[promptchar]='%(!.#.$)'
prc[smiley]='%(?.%{${fg[green]}%}:).%{${fg[red]}%}:()%{${fg[default]}%}'
prc[timestamp]='%B%{${fg[blue]}%}[%T]%{${fg[default]}%}%b'
prc[userspec]='%B%(!.%{${fg[red]}%}.%{${fg[green]}%})%n@%m%{${fg[default]}%}%b'</p>
<p class="quoted"># Make a spiffy prompt
PROMPT=&quot;${prc[userspec]} ${prc[timestamp]} ${prc[abbrevpath]}${prc[newline]}${prc[smiley]} ${prc[promptchar]} &quot;</p>
<p class="quoted"># Unclutter the namespace
unset prc

</pre></p>
<p class="quoted">See how all the colors are defined in an associative array, like
${fg[green]} gets you a green foreground? Say I'm in the directory
&quot;/usr/share/media/music/albums/Pink Floyd - A Momentary Lapse of
Reason&quot;. As a regular user, my prompt looks like:</p>
<p class="quoted"></p>

<pre class="example">
kirk@athena [16:40] ...s/Pink Floyd - A Momentary Lapse of Reason
:) $

</pre></p>
<p class="quoted">My name@host is green, the time is blue, and the path is red. The smiley face is green. Now, if I'm root:</p>
<p class="quoted"></p>

<pre class="example">
$ sudo -s
root@athena [16:43] ...s/Pink Floyd - A Momentary Lapse of Reason
:) #

</pre></p>
<p class="quoted">My name@host is red now, and the prompt char is &quot;#&quot; instead of &quot;$&quot;. But what if I run a command and it fails?</p>
<p class="quoted"></p>

<pre class="example">
# crqecrqw
zsh: command not found: crqecrqw
root@athena [16:44] ...s/Pink Floyd - A Momentary Lapse of Reason
:( #

</pre></p>
<p class="quoted">The green smiley face is now a red frowney face. Someone suggested a
&quot;big&quot; prompt like that, and once I got used to it, I love it. It's
very easy to see where command output stops and the next command
starts, and the whole green smile vs. red frown thing is an instant
visual indicator of a command's results (which sometimes isn't
obvious, say if you're redirecting stderr to /dev/null). Sure, I could
have done something similar in Bash, but I guarantee it would've been
a whole lot less readable. I did that as an experiment to learn Zsh
scripting, and I haven't deliberately used Bash since then.</p>

</blockquote>




      <!-- Page published by Emacs Muse ends here -->
      </div><!-- cont -->
      <div id="side">
	<h3>工具配置笔记</h3>
	<ul>
	  <li><a href="./complang.html">Computer Languages</li>
	  <li><a href="./debian.html">Debian GNU/Linux</a></li>
	  <li><a href="./emacs.html">Emacs Snapshot GTK</a></li>
	  <li><a href="./freebsd.html">FreeBSD</a>
	    & <a href="./windows.html">Windows</a></li>
	  <li><a href="./latex.html">LaTeX</a></li>
	</ul>
	<h3>学生习作</h3>
	<ul>
	  <li><a href="./foo.html">文学与人生课程作业</a></li>
	  <li><a href="./bar.html">偶尔码字</a>
	    & <a href="./memo.html">白将黄胡</a></li>
	</ul>
	<h3>在外网的我的窝</h3>
	<ul>
	  <li><a href="http://hi.baidu.com/irabbit">贫而乐, 富而好礼</a></li>
	  <li><a href="http://www.xiaonei.com/leto">校内网 - 陈养剑</a></li>
	  <li><a href="http://www.douban.com/people/leto">乐透@豆瓣</a></li>
	</ul>
	<h3>友情链接们</h3>
	<ul>
	  <li><a href="http://xcoder.cn/Muse/index.html">
	      <img src="../images/muse-abailly.png"
		   alt="Make with emacs-muse" /></a></li>
	  <li><a href="http://lifegoo.pluskid.org/wiki/index.html">
	      pluskid - Free Mind</a></li>
	  <li><a href="http://www.gnu.org/software/emacs/">
	      <img src="../images/gnu_emacs_icon_grey.png"
		   alt="Made with emacs" /></a></li>
	</ul>
      </div><!-- side -->
      <div><br class="clear" /></div><!-- to clear floats -->
    </div><!-- wiki -->
    <div id="footer">
      <a href="./">
	<img src="../images/gerwinski-gnu-head.png"
	     alt="Go back to main page" /></a>
      <p> By leto@freecity.cn 2009年04月09日</p>
    </div><!-- footer-->
  </body>
</html>
