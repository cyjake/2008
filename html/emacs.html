<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type"
          content="text/html; charset=utf-8" />
    <meta name="generator" content="muse.el" />
    <link rel="shortcut icon" href="../images/favicon.ico" />
    <link rel="stylesheet" type="text/css" media="screen" href="../css/wiki.css" />
    <title>牛头的修行 - dotnil.org</title>
  </head>
  <body>
    <ul class="nav">
	<li><a href="./">Home</a></li>
	<li><a href="./movie.html">Little IMDb</a></li>
	<li><a href="./debian.html">Debian</a></li>
	<li><a href="./fiction.html">Reading</a></li>
	<li><a href="./about.html">About</a></li>
    </ul> <!-- navigator -->
    <div id="greet">
      <span class="email">leto@freecity.cn</span>
      <h1>牛头的修行</h1>
      <h2>Jake's Free House For Fun.</h2>
    </div> <!-- greet --> 
    <div id="wiki">
      <div id="cont">
      <!--contents goes here--><div class="toc"><h2>Table of Contents</h2>
<dl>
<dt><a href="#sec1">新版本</a></dt>
<dd>
<dl>
<dt><a href="#sec2">安装与初步配置</a></dt>
<dd>
<dl>
<dt><a href="#sec3">字体</a></dt>
<dt><a href="#sec4">绝对不是记事本</a></dt>
</dl>
</dd>
</dl>
</dd>
<dt><a href="#sec5">扩展</a></dt>
<dd>
<dl>
<dt><a href="#sec6">扮靓</a></dt>
<dd>
<dl>
<dt><a href="#sec7">函数未定义</a></dt>
</dl>
</dd>
<dt><a href="#sec8">文曲星</a></dt>
<dt><a href="#sec9">家庭影院</a></dt>
<dt><a href="#sec10">梦的编织者</a></dt>
</dl>
</dd>
<dt><a href="#sec11">Elisp 修行</a></dt>
<dt><a href="#sec12">小贴士</a></dt>
<dd>
<dl>
<dt><a href="#sec13">HOWTO Replace Something with Newline in Emacs</a></dt>
</dl>
</dd>
</dl>
</div>

      <!-- Page published by Emacs Muse begins here -->
      
<h2><a name="sec1" id="sec1"></a>
新版本</h2>

<p class="first">emacs 22.1 总算是发布了。分布在世界各地的 emacs 腐竹跪在地上老泪纵横，六年了! 六年了!
终于让我等到了新的稳定版本...然后站起身，打开电脑，继续用他们的
emacs-snapshot-unicode-gtk，也就是那个传说中 Alpha 版本可能丢失你的数据的 emacs 23。</p>

<p>在发展与稳定之间，Richard 的犹犹豫豫患得患失似乎已经变得令人不耐烦，
今番新版本发布也是在跳了几次票之后才千呼万唤始出来的，看看那个传说中的``下一代 emacs&quot;
&mdash; xemacs，早就加入矢量字体和图片显示支持了，而 emacs 呢? 至少新的稳定版 emacs 22.1
还不是 unicode 核心的。对中文支持并不算太好。</p>

<p>不过这并不妨碍我对 emacs 的喜爱，哈哈。</p>

<p>参考了很多人的配置，大部分是 Linux 天地@98 的前版主 pluskid<sup><a class="footref" name="fnr.1" href="#fn.1">1</a></sup> 的</p>

<h3><a name="sec2" id="sec2"></a>
安装与初步配置</h3>

<p class="first">推荐安装的自然是 emacs 23，关于编译安装的帖子网上已经很多了，想要这么干的话自己去百度吧。
debian 和 ubuntu 用户则方便许多，执行下面这个命令就好了。没权限记得 sudo。</p>

<pre class="example">
# apt-get install emacs-snapshot-unicode-gtk
</pre>
不过很有可能你的源里面没有这个东东，debian 的用户可以在 <code>sources.list</code> 里面加入 ustc 的
non-official 源即可，我会在另外一篇 <a href="debian.html">汇聚社区力量 -- debian</a> 里面讲。
ubuntu 的话我不是很清楚了，因为不用很久了，加上以前就是因为那个什么 lupa world 什么的，
提供的亚洲官方源要收费，所以不用了。当然，大部分因素不是鄙视他们，大家都要混口饭吃嘛。

<p>然后就是从此以后都要伴随你的 <code>customization</code> 了，你的 <code>.emacs</code> 文件会因此
变得很长，成就感。哈哈，不过成就感归成就感，把配置文件分得清楚一点毕竟
好些，请参考 kid 的配置例子。顺便提下，Windows 版的 Emacs 安装可以去
emacswiki 上看 <a href="http://www.emacswiki.org/cgi-bin/wiki/MsWindowsInstallation">MsWindowsInstallation</a>，上面还有关于相关设置之类的，我自
己的笔记在 <a href="windows.html">Windows Notes</a> 这里，<a href="http://www.gnu.org/software/emacs/windows/ntemacs.html">GNUEmacs FAQ for Windows</a> 这个算是官方
FAQ 了把。</p>


<h4><a name="sec3" id="sec3"></a>
字体</h4>

<p class="first">前面已经说过，emacs 23 已经支持 <a href="http://www.emacswiki.org/cgi-bin/wiki/XftGnuEmacs">xfts</a> 了，以前还需要加参数 <code>--enable-font-backend</code>
之类的东西才支持，前几天更新了之后现在已经不用鸟。
<pre class="src" style="background-color:#262626;color:#bebebe;"><style type="text/css"><!--       .comment {
        /* font-lock-comment-face */
        color: #add8e6;
      }
      .comment-delimiter {
        /* font-lock-comment-delimiter-face */
        color: #add8e6;
      }
      .keyword {
        /* font-lock-keyword-face */
        color: #afeeee;
        font-weight: bold;
      }
      .string {
        /* font-lock-string-face */
        color: #87cefa;
      }
    --></style>(<span class="keyword">if</span> (string-match <span class="string">"23"</span> (emacs-version)) <span class="comment-delimiter">; </span><span class="comment">&#32769;&#29256;&#26412;&#19981;&#25903;&#25345;&#30690;&#37327;&#23383;&#20307;
</span>    (<span class="keyword">progn</span>
      (set-default-font <span class="string">"DejaVu Sans Mono-10"</span>) <span class="comment-delimiter">; </span><span class="comment">&#36873;&#25321;&#31561;&#23485;&#23383;&#20307;
</span>      (set-fontset-font
       (frame-parameter nil 'font)
       'gb18030 '(<span class="string">"&#26041;&#27491;&#20934;&#22278;_GBK"</span> . <span class="string">"unicode-bmp"</span>)))) <span class="comment-delimiter">; </span><span class="comment">&#20013;&#25991;&#26174;&#31034;&#29992;&#23383;&#20307;
</span></pre>
如果是自己编译安装 emacs 23 的话请务必加上编译参数，昨天我就不得不重新
编译一次一,一：</p>

<pre class="example">
# ./configure --with-gtk --with-xft --enable-font-backend
</pre>


<h4><a name="sec4" id="sec4"></a>
绝对不是记事本</h4>

<p class="first">作为字处理工具，emacs 于我们这些学生而言最常用的自然是写程序，因此它的 <code>c-mode</code> 变得很重要。
emacs 本身提供的 <code>c-mode</code> 其实已经算蛮不错了，再加上一些小特点就完美了:</p>

<ol>
<li>代码折叠</li>
<li>vi 风格的退格删除</li>
<li>vi 风格的注释</li>
<li>换行自动缩进</li>
<li>还是不要制表符了吧...</li>
</ol>

<p>把下面这些函数绑定到相应的键就行了，照搬自 mikeandmore<sup><a class="footref" name="fnr.3" href="#fn.3">3</a></sup>。
<pre class="src" style="background-color:#262626;color:#bebebe;"><style type="text/css"><!--       .function-name {
        /* font-lock-function-name-face */
        color: #7fffd4;
        font-weight: bold;
      }
      .keyword {
        /* font-lock-keyword-face */
        color: #afeeee;
        font-weight: bold;
      }
      .string {
        /* font-lock-string-face */
        color: #87cefa;
      }
    --></style>(<span class="keyword">defun</span> <span class="function-name">my-indent-or-complete</span> ()
  (interactive)
  (<span class="keyword">if</span> (looking-at <span class="string">"\\&gt;"</span>)
      (hippie-expand nil)
    (indent-for-tab-command))
  )

(<span class="keyword">defun</span> <span class="function-name">vi-backspace-unindent</span> ()
  (interactive)
  (<span class="keyword">if</span> (looking-back <span class="string">"^[[:blank:]]+"</span>)
      (<span class="keyword">let</span> ((i 4))
        (<span class="keyword">while</span> (and (not (looking-at <span class="string">"^"</span>)) (&gt; i 0))
          (backward-delete-char 1)
          (setq i (- i 1))))
    (backward-delete-char 1))
  )

(<span class="keyword">defun</span> <span class="function-name">newline-cindent</span> ()
  (interactive)
  (c-indent-new-comment-line)
  (indent-for-tab-command)
  )
</pre></p>




<h2><a name="sec5" id="sec5"></a>
扩展</h2>

<h3><a name="sec6" id="sec6"></a>
扮靓</h3>

<p class="first">要粉墨登场的自然是 emacs 腐竹必备之物 &mdash; 
<code>colcor-theme</code>。仅仅依靠编辑 <code>.emacs</code>
其实也能够让 emacs 变得多姿多彩，然而这样的事情毕竟太过烦冗乏味了，而且真这么干的话，=.emacs=
文件就太过恐怖了。所以呢，我们有叫做 emacs 扩展的这么个东西，不敢讲太细，怕被牛人看到笑话我，
躲墙角画圈圈去了。先翻译一点 emacswiki 上的介绍来作数:
``<code>color-theme</code> 是个提供超过50个颜色主题给您使用的 <code>emacs-lisp</code><sup><a class="footref" name="fnr.2" href="#fn.2">2</a></sup> 包。&quot;</p>

<p>要做的只是，拷贝 color-theme.el 到 emacs 的扩展加载目录，现成的有个
<code>.emacs.d/site-lisp/</code>。好像是这里... 然后添加代码，下面这个是我的配置，参考了 kid 的，
emacs lisp 我自己也是学习中。
<pre class="src" style="background-color:#262626;color:#bebebe;"><style type="text/css"><!--       .comment {
        /* font-lock-comment-face */
        color: #add8e6;
      }
      .comment-delimiter {
        /* font-lock-comment-delimiter-face */
        color: #add8e6;
      }
      .constant {
        /* font-lock-constant-face */
        color: #98fb98;
      }
      .keyword {
        /* font-lock-keyword-face */
        color: #afeeee;
        font-weight: bold;
      }
    --></style>(<span class="keyword">require</span> '<span class="constant">color-theme</span>)                  <span class="comment-delimiter">; </span><span class="comment">&#39068;&#33394;&#20027;&#39064;
</span>(<span class="keyword">if</span> window-system
    (color-theme-dark-blue)
  (color-theme-dark-blue))
</pre></p>

<h4><a name="sec7" id="sec7"></a>
函数未定义</h4>

<p class="first">好像是新版本的 color-theme.el 的缘故，在使用定义的主题之前需要手动将他
们载入，即：<pre class="src" style="background-color:#262626;color:#bebebe;"><style type="text/css"><!--     --></style>(color-theme-initialize)</pre>
放到 require 后面就行了。不过新版本有个好就是函数 <code>(color-theme-print)</code>
把正在使用的主题打印出来，把这段独自拿出来用，就不用每次都要加载那么大
的库了。</p>



<h3><a name="sec8" id="sec8"></a>
文曲星</h3>

<p class="first">教主 pluskid 编写的 emacs 扩展，通过 stardict 的命令行接口 sdcv 实现在 emacs 里面
实时查字典，很实用很好玩的功能，不用看文档看到一半开 stardict 去。
看这个就是了，代码下载和扩展使用都在<a href="http://easybar.8866.org/~pluskid/EmacsStardict.html">这里</a>。<sup><a class="footref" name="fnr.4" href="#fn.4">4</a></sup></p>


<h3><a name="sec9" id="sec9"></a>
家庭影院</h3>

<p><a class="image-link" href="emms.html">
<img src="../images/emms-logo-small.png" alt="" /></a></p>

<p>其实没标题这么夸张，只是个多媒体管理系统而已。emms，全名是 emacs multimedia system。
以前坚持不将 mp3 文件的标签转换成 UTF-8 编码的时候一直是依赖着它来听歌，因为可以不解析标签，
用文件名显示列表即可，哈哈。现在基本上都用 amarok，有的时候忘开 mysql 服务了会有点烦。</p>


<h3><a name="sec10" id="sec10"></a>
梦的编织者</h3>

<p><a class="image-link" href="muse.html">
<img src="../images/muse-made-with.png" alt="" /></a></p>

<p>指的自然不是 dreamweaver :D 虽然据说这玩意也有 linux 下的版本，而且还是 deb 包，
不过我从来没有找到过。我指的是 emacs-muse，就是我用来做这个小网站用的东西，很好玩，
但是因为 elisp 并没有怎么深入学习过，因此在进一步实用上有点难度。</p>



<h2><a name="sec11" id="sec11"></a>
Elisp 修行</h2>

<p><a class="image-link" href="elisp_intro.html">
<img src="../images/blog_head.jpeg" alt="" /></a></p>

<p>其实很多时候一般使用的话，不会 elisp 也无妨，参考一些注释比较详尽的 <code>.emacs</code>
文件搞搞复制黏贴也就差不多了。不过，追求无止境嘛，为了能够更上层楼，穷穷千里目看看，
还是有必要学习下的，何况都已经是 lisp 的简化版了，能够从这个入门再去研究 common lisp 的话，
自然皆大欢喜。</p>

<hr />
<p class="footnote"><a class="footnum" name="fn.1" href="#fnr.1">1.</a>  很多地方都是参考 <a href="http://easybar.8866.org/~pluskid/">pluskid</a> 的，我是半吊子，要学习最好参考他的主页。</p>

<p class="footnote"><a class="footnum" name="fn.2" href="#fnr.2">2.</a>  emacs 扩展语言，是 common lisp 的方言的一种，相对比较简单易学。</p>

<p class="footnote"><a class="footnum" name="fn.3" href="#fnr.3">3.</a>  大零小弟弟，牛气轰轰的, 让我深深地觉得自己老了。</p>

<p class="footnote"><a class="footnum" name="fn.4" href="#fnr.4">4.</a>  StarDict 命令行接口 <code>sdcv</code> 与字典的安装：</p>

<pre class="example">
# aptitude install sdcv
# tar -xjvf a.tar.bz2
# mv a /usr/share/stardict/dic
</pre>


<h2><a name="sec12" id="sec12"></a>
小贴士</h2>

<h3><a name="sec13" id="sec13"></a>
HOWTO Replace Something with Newline in Emacs</h3>

<p class="first">(2008-10-08) <a href="http://jeremy.zawodny.com/blog/archives/008872.html">The answer</a>, it turns out, is: C-q C-j.</p>



      <!-- Page published by Emacs Muse ends here -->
      </div><!-- cont -->
      <div id="side">
	<h3>工具配置笔记</h3>
	<ul>
	  <li><a href="./complang.html">Computer Languages</li>
	  <li><a href="./debian.html">Debian GNU/Linux</a></li>
	  <li><a href="./emacs.html">Emacs Snapshot GTK</a></li>
	  <li><a href="./freebsd.html">FreeBSD</a>
	    & <a href="./windows.html">Windows</a></li>
	  <li><a href="./latex.html">LaTeX</a></li>
	</ul>
	<h3>学生习作</h3>
	<ul>
	  <li><a href="./foo.html">文学与人生课程作业</a></li>
	  <li><a href="./bar.html">偶尔码字</a>
	    & <a href="./memo.html">白将黄胡</a></li>
	</ul>
	<h3>在外网的我的窝</h3>
	<ul>
	  <li><a href="http://hi.baidu.com/irabbit">贫而乐, 富而好礼</a></li>
	  <li><a href="http://www.xiaonei.com/leto">校内网 - 陈养剑</a></li>
	  <li><a href="http://www.douban.com/people/leto">乐透@豆瓣</a></li>
	</ul>
	<h3>友情链接们</h3>
	<ul>
	  <li><a href="http://xcoder.cn/Muse/index.html">
	      <img src="../images/muse-abailly.png"
		   alt="Make with emacs-muse" /></a></li>
	  <li><a href="http://pluskid.lifegoo.com/">
	      pluskid - Free Mind</a></li>
	  <li><a href="http://www.gnu.org/software/emacs/">
	      <img src="../images/gnu_emacs_icon_grey.png"
		   alt="Made with emacs" /></a></li>
	</ul>
      </div><!-- side -->
      <div><br class="clear" /></div><!-- to clear floats -->
    </div><!-- wiki -->  
    <div id="footer">
      <a href="./">
	<img src="../images/gerwinski-gnu-head.png" 
	     alt="Go back to main page" /></a>
      <p> By leto@freecity.cn 2009年04月09日</p>
    </div><!-- footer-->
  </body>
</html>
